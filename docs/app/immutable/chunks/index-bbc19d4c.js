import{w as T}from"./index-f1450eca.js";import{P,Q as k,R as C,T as O}from"./index-8c8034ba.js";function w(t){return Object.prototype.toString.call(t)==="[object Date]"}function j(t,n,e,i){if(typeof e=="number"||w(e)){const r=i-e,s=(e-n)/(t.dt||1/60),o=t.opts.stiffness*r,f=t.opts.damping*s,p=(o-f)*t.inv_mass,l=(s+p)*t.dt;return Math.abs(l)<t.opts.precision&&Math.abs(r)<t.opts.precision?i:(t.settled=!1,w(e)?new Date(e.getTime()+l):e+l)}else{if(Array.isArray(e))return e.map((r,s)=>j(t,n[s],e[s],i[s]));if(typeof e=="object"){const r={};for(const s in e)r[s]=j(t,n[s],e[s],i[s]);return r}else throw new Error(`Cannot spring ${typeof e} values`)}}function R(t,n={}){const e=T(t),{stiffness:i=.15,damping:r=.8,precision:s=.01}=n;let o,f,p,l=t,y=t,c=1,h=0,g=!1;function b(d,a={}){y=d;const D=p={};if(t==null||a.hard||m.stiffness>=1&&m.damping>=1)return g=!0,o=k(),l=d,e.set(t=y),Promise.resolve();if(a.soft){const u=a.soft===!0?.5:+a.soft;h=1/(u*60),c=0}return f||(o=k(),g=!1,f=C(u=>{if(g)return g=!1,f=null,!1;c=Math.min(c+h,1);const A={inv_mass:c,opts:m,settled:!0,dt:(u-o)*60/1e3},M=j(A,l,t,y);return o=u,l=t,e.set(t=M),A.settled&&(f=null),!A.settled})),new Promise(u=>{f.promise.then(()=>{D===p&&u()})})}const m={set:b,update:(d,a)=>b(d(y,t),a),subscribe:e.subscribe,stiffness:i,damping:r,precision:s};return m}function E(t,n){if(t===n||t!==t)return()=>t;const e=typeof t;if(e!==typeof n||Array.isArray(t)!==Array.isArray(n))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const i=n.map((r,s)=>E(t[s],r));return r=>i.map(s=>s(r))}if(e==="object"){if(!t||!n)throw new Error("Object cannot be null");if(w(t)&&w(n)){t=t.getTime(),n=n.getTime();const s=n-t;return o=>new Date(t+o*s)}const i=Object.keys(n),r={};return i.forEach(s=>{r[s]=E(t[s],n[s])}),s=>{const o={};return i.forEach(f=>{o[f]=r[f](s)}),o}}if(e==="number"){const i=n-t;return r=>t+r*i}throw new Error(`Cannot interpolate ${e} values`)}function S(t,n={}){const e=T(t);let i,r=t;function s(o,f){if(t==null)return e.set(t=o),Promise.resolve();r=o;let p=i,l=!1,{delay:y=0,duration:c=400,easing:h=O,interpolate:g=E}=P(P({},n),f);if(c===0)return p&&(p.abort(),p=null),e.set(t=r),Promise.resolve();const b=k()+y;let m;return i=C(d=>{if(d<b)return!0;l||(m=g(t,o),typeof c=="function"&&(c=c(t,o)),l=!0),p&&(p.abort(),p=null);const a=d-b;return a>c?(e.set(t=o),!1):(e.set(t=m(h(a/c))),!0)}),i.promise}return{set:s,update:(o,f)=>s(o(r,t),f),subscribe:e.subscribe}}export{R as s,S as t};
